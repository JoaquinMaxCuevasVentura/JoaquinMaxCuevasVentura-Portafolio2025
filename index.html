<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portafolio profesional de Joaquín Max Cuevas Ventura - Arquitectura y Diseño Gráfico">
    <title>PORTAFOLIO 2026 | Joaquin Max Cuevas Ventura</title>

    <!-- 1. FUENTE ARCHIVO -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- 2. ESTILOS DFLIP -->
    <link href="https://cdn.jsdelivr.net/npm/dflip/css/dflip.min.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/dflip/css/themify-icons.min.css" rel="stylesheet" type="text/css">

    <style>
        /* --- CONFIGURACIÓN VISUAL --- */
        :root {
            --bg-color: #222223;      
            --accent-color: #dc6b2f;
            --text-main: #FFFFFF;     
            --ui-opacity: 0.7;
        }

        *, *::before, *::after { box-sizing: border-box; }

        body, html {
            height: 100%; margin: 0; background-color: var(--bg-color);
            font-family: 'Archivo', sans-serif; overflow: hidden;
        }

        #grained-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none;
        }

        #flipbook-container {
            height: 100vh; width: 100vw; position: relative; z-index: 10; 
        }

        /* --- INTERFAZ MINIMALISTA --- */
        .df-ui-wrapper {
            background: transparent !important;
            box-shadow: none !important;
            border: none !important;
            padding-bottom: 30px !important;
        }

        .df-ui-btn {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            color: var(--text-main) !important;
            border-radius: 0 !important;
            margin: 0 8px !important;
            transition: all 0.2s ease;
            opacity: var(--ui-opacity);
            width: auto !important;
            height: auto !important;
        }

        /* Estilos específicos para botones de texto (Idiomas) */
        .df-ui-btn.lang-btn {
            font-family: 'Archivo', sans-serif;
            font-weight: 700;
            font-size: 12px;
            letter-spacing: 1px;
            padding: 0 4px !important;
            line-height: 30px; /* Igualar altura de iconos */
        }

        /* Separador vertical entre idiomas */
        .lang-separator {
            display: inline-block;
            width: 1px;
            height: 14px;
            background-color: var(--text-main);
            opacity: 0.3;
            margin: 0 2px;
            vertical-align: middle;
        }

        .df-ui-btn:hover, .df-ui-btn.active, .df-ui-btn.info-active {
            color: var(--accent-color) !important;
            background: transparent !important;
            opacity: 1 !important;
            transform: scale(1.3);
            text-shadow: 0 0 10px rgba(220, 107, 47, 0.5);
        }

        /* Estado activo fijo para el idioma seleccionado */
        .df-ui-btn.lang-active {
            color: var(--accent-color) !important;
            opacity: 1 !important;
            cursor: default;
            transform: scale(1.1); /* Ligeramente más grande pero fijo */
        }

        .df-ui-btn:focus-visible {
            color: var(--accent-color) !important;
            opacity: 1 !important;
            outline: 2px solid var(--accent-color);
            outline-offset: 4px;
        }

        /* Corrección del input de página */
        .df-ui-page input {
            background: transparent !important; border: none !important;
            color: var(--text-main) !important; font-family: 'Archivo', sans-serif !important;
        }

        /* --- VENTANA MODAL INFO --- */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.96); z-index: 9999;
            justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease;
        }
        .modal-overlay.show { display: flex; opacity: 1; }

        .modal-content {
            color: #fff; max-width: 500px; width: 85%; text-align: center;
            position: relative; max-height: 90vh; overflow-y: auto; padding: 20px;
        }

        .modal-line { width: 40px; height: 2px; background-color: var(--accent-color); margin: 20px auto; }
        .modal-title { font-size: 20px; font-weight: 800; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 2px; line-height: 1.2; }
        .modal-subtitle { font-size: 11px; color: var(--accent-color); margin-bottom: 30px; text-transform: uppercase; letter-spacing: 2px; font-weight: 600; }
        .modal-body { font-size: 14px; color: #ccc; line-height: 1.6; font-weight: 300; }
        .modal-contact { margin-top: 30px; border-top: 1px solid #222; padding-top: 25px; display: flex; flex-direction: column; gap: 18px; }

        .contact-link {
            color: #666; text-decoration: none; font-size: 11px; letter-spacing: 2px;
            text-transform: uppercase; transition: color 0.2s ease; cursor: pointer;
            padding: 8px 4px; border: none; background: transparent; display: block; width: 100%;
        }
        .contact-link span {
            display: block; color: #fff; font-weight: 400; font-size: 14px;
            letter-spacing: 0.5px; margin-top: 4px; transition: color 0.2s ease;
        }
        .contact-link:hover, .contact-link:focus, .contact-link:hover span { color: var(--accent-color); }
        
        .close-modal {
            position: absolute; top: -50px; right: 0; color: #666; font-size: 30px;
            cursor: pointer; transition: color 0.2s ease; background: transparent; border: none;
        }
        .close-modal:hover { color: var(--accent-color); }
        
        .ti-info-custom::before { content: "\e645"; }

        /* Media Queries (Mantener las originales) */
        @media screen and (max-width: 380px) {
            .modal-content { width: 92%; }
            .close-modal { top: -40px; right: -5px; }
        }
        .sr-only { position: absolute; width: 1px; height: 1px; overflow: hidden; clip: rect(0,0,0,0); }
    </style>
</head>
<body>
    <a href="#flipbook-container" class="sr-only">Saltar al portafolio</a>
    <div id="grained-container" aria-hidden="true"></div>

    <!-- MODAL INFO (Con IDs añadidos para traducción) -->
    <div id="infoModal" class="modal-overlay" role="dialog" aria-modal="true">
        <div class="modal-content">
            <button type="button" class="close-modal" id="close-modal-btn">&times;</button>
            
            <h1 id="modal-title" class="modal-title">JOAQUIN MAX<br>CUEVAS VENTURA</h1>
            <p id="modal-subtitle" class="modal-subtitle">PORTAFOLIO 2026</p>
            
            <div class="modal-line" aria-hidden="true"></div>
            
            <div class="modal-body">
                <p id="modal-desc">Arquitectura y diseño gráfico</p>
                
                <div class="modal-contact">
                    <a href="mailto:JoACKo333@gmail.com" class="contact-link">
                        <span id="lbl-email-title" style="font-size:11px; color:#666; text-transform:uppercase;">CORREO</span>
                        <span>JoACKo333@gmail.com</span>
                    </a>

                    <button type="button" class="contact-link" id="phone-btn">
                        <span id="lbl-phone-title" style="font-size:11px; color:#666; text-transform:uppercase;">TELÉFONO / WHATSAPP</span>
                        <span id="phone-display">+591 78834651</span>
                    </button>

                    <div class="contact-link" aria-disabled="true" role="text">
                        La Paz, Bolivia
                    </div>
                </div>
            </div>
        </div>
    </div>

    <main id="flipbook-container"></main>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dflip/js/dflip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/grained/0.0.2/grained.min.js"></script>

    <script>
        (function() {
            'use strict';

            // --- 1. CONFIGURACIÓN DE IDIOMA ---
            // Detectar idioma desde la URL (?lang=en o ?lang=es)
            const urlParams = new URLSearchParams(window.location.search);
            // Si no hay param, por defecto es 'es'
            const currentLang = urlParams.get('lang') === 'en' ? 'en' : 'es';

            // Diccionario de datos y traducciones
            const DATA = {
                es: {
                    pdf: 'PORTAFOLIO_2026_JoaquinMaxCuevasVentura_v01_ES.pdf', // Nombre archivo Español
                    ui: {
                        toggleSound: 'SONIDO', toggleThumbnails: 'VISTA', toggleOutline: 'INDICE',
                        previousPage: 'ANT', nextPage: 'SIG', toggleFullscreen: 'FULL',
                        zoomIn: 'ZOOM +', zoomOut: 'ZOOM -', infoTitle: 'CONTACTO / INFO'
                    },
                    modal: {
                        subtitle: 'PORTAFOLIO 2026',
                        desc: 'Arquitectura y diseño gráfico',
                        lblEmail: 'CORREO',
                        lblPhone: 'TELÉFONO / WHATSAPP'
                    }
                },
                en: {
                    pdf: 'PORTAFOLIO_2026_JoaquinMaxCuevasVentura_v01_EN.pdf', // Nombre archivo Inglés
                    ui: {
                        toggleSound: 'SOUND', toggleThumbnails: 'VIEW', toggleOutline: 'INDEX',
                        previousPage: 'PREV', nextPage: 'NEXT', toggleFullscreen: 'FULL',
                        zoomIn: 'ZOOM +', zoomOut: 'ZOOM -', infoTitle: 'CONTACT / INFO'
                    },
                    modal: {
                        subtitle: 'PORTFOLIO 2026',
                        desc: 'Architecture and Graphic Design',
                        lblEmail: 'EMAIL',
                        lblPhone: 'PHONE / WHATSAPP'
                    }
                }
            };

            // Seleccionar datos según idioma actual
            const CONTENT = DATA[currentLang];
            const PHONE_NUMBER = '+591 78834651';

            // --- 2. ACTUALIZAR DOM ESTÁTICO (TEXTOS MODAL) ---
            function updateLanguageTexts() {
                document.documentElement.lang = currentLang;
                document.getElementById('modal-subtitle').textContent = CONTENT.modal.subtitle;
                document.getElementById('modal-desc').textContent = CONTENT.modal.desc;
                document.getElementById('lbl-email-title').textContent = CONTENT.modal.lblEmail;
                document.getElementById('lbl-phone-title').textContent = CONTENT.modal.lblPhone;
            }

            // --- 3. FUNCIONES AUXILIARES (Grained, Copiar, Modal) ---
            function initGrained() {
                try {
                    if (typeof grained === 'function') {
                        grained('#grained-container', {
                            animate: true, patternWidth: 100, patternHeight: 100,
                            grainOpacity: 0.05, grainDensity: 1
                        });
                    }
                } catch (e) { console.warn('Grained error:', e); }
            }

            const modal = document.getElementById('infoModal');
            const phoneDisplay = document.getElementById('phone-display');

            function copyPhone() {
                const originalText = phoneDisplay.textContent;
                const successText = currentLang === 'en' ? 'COPIED!' : '¡COPIADO!';
                
                navigator.clipboard.writeText(PHONE_NUMBER).then(() => {
                    phoneDisplay.textContent = successText;
                    phoneDisplay.style.color = 'var(--accent-color)';
                    setTimeout(() => {
                        phoneDisplay.textContent = originalText;
                        phoneDisplay.style.color = '';
                    }, 2000);
                }).catch(err => console.error('Copy failed', err));
            }

            function toggleInfo() {
                modal.classList.contains('show') ? closeModal() : openModal();
            }
            window.toggleInfo = toggleInfo; // Global para dFlip

            function openModal() {
                modal.style.display = 'flex';
                requestAnimationFrame(() => modal.classList.add('show'));
                document.body.style.overflow = 'hidden';
            }

            function closeModal() {
                modal.classList.remove('show');
                setTimeout(() => modal.style.display = 'none', 300);
                document.body.style.overflow = '';
            }

            // Listeners
            document.getElementById('close-modal-btn').addEventListener('click', closeModal);
            document.getElementById('phone-btn').addEventListener('click', copyPhone);
            modal.addEventListener('click', (e) => { if(e.target === modal) closeModal(); });

            // --- 4. INICIAR LIBRO DFLIP ---
            function initFlipbook() {
                var bookOptions = {
                    source: CONTENT.pdf, // Carga PDF dinámicamente
                    webgl: true,
                    height: '100%',
                    duration: 700,
                    backgroundColor: 'transparent',
                    disableFolderPath: true,
                    text: CONTENT.ui, // Carga traducciones UI
                    allControls: 'altPrev,pageNumber,altNext,play,outline,thumbnail,zoomIn,zoomOut,fullScreen',
                    hideControls: 'share,download,more',

                    onReady: function(scene) {
                        // A) Botón Info
                        var infoBtn = $('<button>', {
                            'class': 'df-ui-btn df-ui-info',
                            'title': CONTENT.ui.infoTitle,
                            'type': 'button'
                        }).html('<i class="ti-info-alt"></i>').on('click', toggleInfo);

                        // B) Botones Idioma (ES | EN)
                        var langContainer = $('<div>', {
                            'style': 'display:inline-block; margin-left:10px; vertical-align:middle;'
                        });

                        // Botón ES
                        var btnES = $('<button>', {
                            'class': 'df-ui-btn lang-btn ' + (currentLang === 'es' ? 'lang-active' : ''),
                            'text': 'ES',
                            'title': 'Español'
                        }).on('click', function() {
                            if (currentLang !== 'es') window.location.search = '?lang=es';
                        });

                        // Separador
                        var sep = $('<span>', { 'class': 'lang-separator' });

                        // Botón EN
                        var btnEN = $('<button>', {
                            'class': 'df-ui-btn lang-btn ' + (currentLang === 'en' ? 'lang-active' : ''),
                            'text': 'EN',
                            'title': 'English'
                        }).on('click', function() {
                            if (currentLang !== 'en') window.location.search = '?lang=en';
                        });

                        // Insertar en la barra
                        var controls = $('.df-ui-wrapper');
                        controls.append(infoBtn);
                        
                        // Añadimos el grupo de idiomas al final
                        langContainer.append(btnES, sep, btnEN);
                        controls.append(langContainer);
                    }
                };

                $('#flipbook-container').flipBook(bookOptions.source, bookOptions);
            }

            // Ejecución inicial
            initGrained();
            updateLanguageTexts();
            jQuery(document).ready(initFlipbook);

        })();
    </script>
</body>
</html>
